# タスク04: テスト・ドキュメント・運用整備

## 概要
SEO最適化機能の動作確認、本番環境切り替えテスト、運用ドキュメント作成を行い、機能の品質と継続性を確保する。

## テスト要件

### 1. 開発環境テスト
- [ ] `localhost:3000`でのメタデータ表示確認
- [ ] 各ページのOG tags確認
- [ ] 構造化データの出力形式確認
- [ ] TypeScript型チェック実行

### 2. 本番環境シミュレーションテスト
```bash
# 本番URL設定でのテスト
SITE_URL=https://majikichi-meshi.com npm run dev
```
- [ ] 環境変数切り替えの動作確認
- [ ] canonical URLの正確性確認
- [ ] OG画像URLの絶対パス確認

### 3. SEOツールでの検証
- [ ] Facebook Open Graph Debugger
- [ ] Twitter Card Validator  
- [ ] Google Rich Results Test
- [ ] Schema.org Validator

### 4. ブラウザ確認
- [ ] Chrome Dev Tools（Elements > head確認）
- [ ] メタデータの正確性確認
- [ ] JavaScript無効時の表示確認

## ドキュメント作成

### 1. 運用ガイド
```markdown
# docs/seo-operation-guide.md
- 環境変数設定方法
- 新ページ追加時のSEO設定手順
- トラブルシューティング
```

### 2. 本番環境設定手順
```markdown  
# docs/production-seo-setup.md
- .envファイル設定例
- ドメイン切り替え手順
- 検証方法
```

### 3. CLAUDE.md更新
既存のCLAUDE.mdにSEO設定情報を追記

## 本番環境切り替えテスト

### テストシナリオ
1. **環境変数未設定時**: localhost URLでの動作
2. **環境変数設定時**: 本番URLでの動作
3. **混在環境**: API_BASE_URLのみ本番、SITE_URLは開発
4. **エラーハンドリング**: 不正なURL設定時の動作

### 検証項目
- [ ] 全ページでcanonical URLが正しく設定される
- [ ] OG:urlが環境に応じて切り替わる
- [ ] 構造化データのURLが適切に設定される
- [ ] エラー時のフォールバック動作

## パフォーマンス確認

### 計測項目
- [ ] ページ表示速度への影響
- [ ] メタデータ生成処理時間
- [ ] バンドルサイズへの影響
- [ ] JavaScript実行時間

### 最適化確認
- [ ] 不要なメタデータ生成の削除
- [ ] 構造化データの最適化
- [ ] 画像URL生成の効率化

## 運用・保守設定

### 1. 定期チェック項目
- 月1回: SEOツールでの検証
- 新ページ追加時: メタデータ設定確認
- 環境変更時: URL設定確認

### 2. トラブルシューティング
- メタデータが表示されない場合の対処法
- 構造化データエラーの解決方法
- SNS共有時の画像が表示されない場合の対処

### 3. 継続改善
- 新しいschema.org仕様への対応
- SNSプラットフォーム仕様変更への対応
- SEOベストプラクティスの反映

## 完了基準
- [ ] 全テストシナリオの実行・確認完了
- [ ] SEOツールでの検証完了（エラーなし）
- [ ] 運用ドキュメント作成完了
- [ ] 本番環境切り替え手順の確認完了
- [ ] パフォーマンス影響の確認完了
- [ ] CLAUDE.md更新完了

## 成果物
- 運用ガイドドキュメント
- 本番環境設定手順書
- テスト結果報告書
- トラブルシューティングガイド